
```python 
    max_group_sentences = []
    for group in groups:    # groups 是所有的分组，group 是同一个位置的所有的文字
        # 差异性最大的是字幕
        if len(set(group['sentences'])) > len(set(max_group_sentences)):
            group["is_zimu"] = True
            max_group_sentences = group['sentences']
        else:
            group["is_zimu"] = False

    update_is_zimu(groups)

    # 最后再做一次过滤
    if len(set(max_group_sentences)) <= 5:
        max_group_sentences = []

    all_zimu_sentences = ','.join(max_group_sentences)
    txt.write(all_zimu_sentences)
    txt.close()
```


```python 
def main(video_name):
    frame_dir = settings.VIDEO_FRAME_DIR + video_name.split('.')[0] + '/'
    output_dir = settings.OUTPUT_DIR + video_name.split('.')[0] + '/'
    if not (os.path.exists(output_dir)):
        os.mkdir(output_dir)
    ocr = PaddleOCR(use_angle_cls=True, lang="ch", use_gpu=False)
    run_time = datetime.datetime.now().strftime("%Y_%m_%d_%H_%M_%S")
    txt = open(output_dir + str(run_time) + '.txt', 'a', encoding='utf-8')
    frames = sorted(filter(is_img, os.listdir(frame_dir)))

    groups = grouping_by_position(frames, frame_dir, ocr)

    max_group_sentences = []
    for group in groups:    # groups 是所有的分组，group 是同一个位置的所有的文字
        # 差异性最大的是字幕
        if len(set(group['sentences'])) > len(set(max_group_sentences)):
            group["is_zimu"] = True
            max_group_sentences = group['sentences']
        else:
            group["is_zimu"] = False

    update_is_zimu(groups)

    # 最后再做一次过滤
    if len(set(max_group_sentences)) <= 5:
        max_group_sentences = []

    all_zimu_sentences = ','.join(max_group_sentences)
    txt.write(all_zimu_sentences)
    txt.close()
    get_zimu_position(groups)
    print('finish.')
``` 


